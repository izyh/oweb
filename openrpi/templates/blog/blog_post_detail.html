{% extends "blog/blog_post_list.html" %}

{% comment %}

block:
	# header    @ base.html
	# extra_js  @ base.html
	# extra_css @ base.html
	# title     @ blog/blog_post_list.html @ base.html
	# body      @ blog/blog_post_list.html @ base.html

sqlite> .schema pages_richtextpage
CREATE TABLE "pages_richtextpage" (
    "page_ptr_id" integer NOT NULL PRIMARY KEY REFERENCES "pages_page" ("id"),
    "content" text NOT NULL
);

{% endcomment %}

{% load mezzanine_tags staticfiles %}

{% block title %}{{ blog_post.title }}{% endblock %}

{% block extra_js %}
<script src="{% static 'js/jquery-ui.min.js' %}"></script>
<script src="{% static 'js/jquery.tocify.min.js' %}"></script>
<script src="{% static 'js/jquery.pin.js' %}"></script>
<script src="{% static 'js/doc.js' %}"></script>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/doc.css' %}">
<link rel="stylesheet" href="{% static 'css/jquery-ui.min.css' %}">
{% endblock %}

{% block body %}

	<div class="doc-header">
		<div class="container">
			<h1>{{ blog_post.title }}</h1>
			<p>{{ blog_post.description }}</p>
			<br/>
			<p>{{ blog_post.user }}</p>
			<!-- <p><small>{{ blog_post.email }}</small></p> -->
		</div>
	</div>

	<div class="container">
		<div class="row">
			<!-- Main content -->
			<div class="col-md-9" role="main">
				<div class="doc-content">
					{{ blog_post.content | richtext_filters | safe }}
				</div>	
			</div>
			<div class="col-md-3 pin_top">
				<!-- toc -->
				<div class="row">
					<div class="col-md-12"><div class="doc-toc"></div></div>
				</div>
				<!-- extra -->
				<div class="row">
					<div class="col-md-12">
						<div class="doc-extra">
							<!-- <a page="_blank" href="/feedback/request?id={{page.id}}" style="text-decoration:none;">需求反馈 ›</a>
							<a page="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email={{page.email}}&subject=Bug_feedback_ID={{page.id}}" style="text-decoration:none;">漏洞反馈 ›</a>
							<a page="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email={{page.email}}&subject=Appraise_feedback_ID={{page.id}}" style="text-decoration:none;">质量评价 ›</a> -->
							<a href="#top">返回顶部</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript">

	$( function () {
		outline_parser();
	});

	function outline_parser () {
		$(".pin_top").pin();
		$(".doc-toc").tocify({
			'context'         : ".doc-content",
			'selectors'       : "h1,h2",
			'showEffectSpeed' : "fast",
			'hideEffectSpeed' : "fast",
			'smoothScroll'    : false,
			'highlightOffset' : 10,
		});
	}

	</script>

{% endblock %}