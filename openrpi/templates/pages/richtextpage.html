{% extends "pages/page.html" %}

{% comment %}

block:
	# header   @ base.html
	# extra_js @ base.html
	# title  @ pages/page.html @ base.html
	# body   @ pages/page.html @ base.html

sqlite> .schema pages_richtextpage
CREATE TABLE "pages_richtextpage" (
    "page_ptr_id" integer NOT NULL PRIMARY KEY REFERENCES "pages_page" ("id"),
    "content" text NOT NULL
);

{% endcomment %}

{% load mezzanine_tags staticfiles %}

{% block title %}{{ page.title }}{% endblock %}

{% block extra_js %}
<script src="{% static 'js/docs.min.js' %}"></script>
<script src="{% static 'js/jquery-ui.min.js' %}"></script>
<script src="{% static 'js/jquery.tocify.min.js' %}"></script>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/jquery-ui.min.css' %}">
{% endblock %}

{% block body %}

	<div class="bs-docs-header">
		<div class="container">
			<h1>{{ page.title }}</h1>
			<p>{{ page.description }}</p>
			<!-- <br/> -->
			<!-- <p><small>{{ page.author }}</small></p> -->
			<!-- <p><small>{{ page.email }}</small></p> -->
		</div>
	</div>

	<div class="container bs-docs-container">
		<div class="row">
			<!-- Main content -->
			<div class="col-md-9" role="main">
				<div class="bs-docs-content bs-docs-section">
					{{ page.richtextpage.content | richtext_filters | safe }}
				</div>	
			</div>
			<!-- outline -->
			<div class="col-md-3">
				<div class="bs-docs-sidebar hidden-print hidden-xs hidden-sm toc" role="complementary"></div>
			</div>
		</div>
	</div>

	<script type="text/javascript">

	$( function () {
		outline_parser();
		content_parser();
	});

	function content_parser () {
		$(".bs-docs-content h1").each(function () {
			$(this).addClass("page-header");
		});
		$(".bs-docs-content img").each(function () {
			$(this).addClass("img-responsive");
		});
	}

	function outline_parser () {
		$(".toc").tocify({
			'context'         : ".bs-docs-content",
			'selectors'       : "h1,h2",
			'showEffect'      : "none",
			'hideEffect'      : "none",
			'smoothScroll'    : false,
			'highlightOffset' : 10,
		});
		$(".toc").append($("#toc_append").html());
		$(".toc ul").each(function () {
			$(this).addClass("nav");
		});
	}

	</script>

<div id="toc_append" style="display:none">
	<br/>
	<a class="bs-docs-item" page="_blank" href="/feedback/request?id={{page.id}}" style="text-decoration:none;">需求反馈 ›</a>
	<a class="bs-docs-item" page="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email={{page.email}}&subject=Bug_feedback_ID={{page.id}}" style="text-decoration:none;">漏洞反馈 ›</a>
	<a class="bs-docs-item" page="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email={{page.email}}&subject=Appraise_feedback_ID={{page.id}}" style="text-decoration:none;">质量评价 ›</a>
	<a class="back-to-top" href="#top">返回顶部</a>
</div>

{% endblock %}